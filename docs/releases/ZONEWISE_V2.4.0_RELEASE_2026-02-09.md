# ZoneWise V2.4.0 Release Notes
**Date:** 2026-02-09
**Upstream:** Craft Agents OSS v0.4.0
**Status:** ⚠️ Synced — Feature Parity Restoration In Progress

---

## Upstream Changes (Craft Agents v0.4.0)

Multi-connection AI setup, Codex/OpenAI support, per-workspace defaults, and documentation upgrades.

### Key Features from Upstream
- **Multi-Provider LLM:** Add multiple providers (Anthropic, OpenRouter, Codex/OpenAI)
- **Connection Validation:** Validate and manage each connection independently
- **Session Locking:** Sessions lock to a connection after first message
- **Codex/OpenAI OAuth:** Run Codex-powered sessions alongside Anthropic
- **Per-Workspace LLM Defaults:** Override global default for new sessions
- **Per-Workspace Themes:** Set default theme via defaults.colorTheme
- **Opus 4.5:** Listed as "Previous generation" option
- **Image Auto-Resize:** Large images resized instead of rejected (8000px limit)
- **Typed Error Codes:** ImageValidationError for programmatic handling
- **.agents/skills Convention:** Cross-tool standard (Craft Agents, Codex, Gemini)
- **Claude Agent SDK 0.2.34:** Updated from 0.2.19
- **macOS Update Fix:** Real download progress, ~150 lines of workarounds removed

---

## ZoneWise Integration Status

### Feature Parity: RESTORATION IN PROGRESS
Traycer issues filed for resolution:
- [#1] Restore @craft-agent/ui imports in App.tsx (CRITICAL)
- [#2] Add file upload/download to web chat (CRITICAL)
- [#3] Integrate Craft Agents overlay system (HIGH)
- [#4] Add multi-session support (MEDIUM)

### ZoneWise-Specific Features (Active)
- ✅ 4 Specialized Agents: Zoning Lookup, District Compare, Research, Permit Check
- ✅ 6 Data Skills: 67 FL Counties, 5395 Districts, District Lookup, Density Compare, Setback Analysis, Permitted Use Search
- ✅ 7-Language NLP: EN, ES, HE (RTL), PT, FR, ZH, HI
- ✅ Navy Brand Theme: #1E3A5F primary, #F47B20 accent
- ✅ SSE Streaming: Claude Sonnet 4.5 intelligence layer
- ✅ Supabase Real-Time: 369 jurisdictions, 5,395 districts, 1,297 standards
- ✅ Mapbox Integration: Florida zoning visualization

### Deployment Targets
| Target | URL | Status |
|--------|-----|--------|
| Web (Vercel) | zonewise-desktop-viewer.vercel.app | ✅ Live |
| Backend (Render) | zonewise-agents.onrender.com | ✅ v1.1.0 |
| Desktop (Electron) | Craft Agents fork | ✅ v2.0.0 |

---

## Autonomous Pipeline Deployed
This release activates the full autonomous upstream sync pipeline:
1. **Detect:** Polls lukilabs/craft-agents-oss every 6 hours
2. **Sync:** Rebase or merge with auto-conflict resolution
3. **Parity Check:** Verifies all @craft-agent/ui imports preserved
4. **Build:** Web viewer + Electron desktop (zero errors required)
5. **Release Doc:** Auto-generated matching this format
6. **Deploy:** Vercel (web) + GitHub Release (desktop)
7. **Verify:** curl endpoints for 200 + JS bundle + backend health
8. **Log:** Supabase insights table

If parity check fails, a GitHub Issue with `traycer` label is auto-created.
Claude Code reads CLAUDE_CODE_PARITY_FIX.md and executes restoration autonomously.

---

## Architecture Rule (ENFORCED BY CI)
> **Craft Agents is the FOUNDATION. ZoneWise is the LAYER.**
> All @craft-agent/ui imports MUST be preserved.
> SessionViewer, all 6 overlays, FileViewer, PlatformActions are MANDATORY.
> ZoneWise features (agents, skills, NLP, map) are ADDITIONS, never replacements.

---

*Auto-generated by ZoneWise Upstream Sync Pipeline*
*Next sync check: 6 hours from deployment*
